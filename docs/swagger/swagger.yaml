basePath: /api/v1
definitions:
  main.AggregatedBatch:
    properties:
      batch_ipfs_cid:
        description: IPFS CID of the final Level 2 aggregated batch
        type: string
      epoch_id:
        type: string
      merkle_root:
        description: Merkle root as base64 string
        type: string
      project_count:
        type: integer
      project_ids:
        description: Array of project IDs that were aggregated
        items:
          type: string
        type: array
      timestamp:
        type: string
      validator_batches:
        additionalProperties:
          type: string
        description: validator_id â†’ their individual Level 1 batch IPFS CID
        type: object
      validator_count:
        type: integer
      validator_ids:
        description: Array of validator IDs that contributed
        items:
          type: string
        type: array
    type: object
  main.BatchPart:
    properties:
      epoch_id:
        type: string
      part_id:
        type: integer
      project_count:
        type: integer
    type: object
  main.FinalizedBatch:
    properties:
      epoch_id:
        type: string
      ipfs_cid:
        type: string
      project_count:
        type: integer
      sequencer_id:
        type: string
      timestamp:
        type: string
      vote_count:
        type: integer
    type: object
  main.PipelineOverview:
    properties:
      active_windows:
        type: integer
      active_workers:
        type: integer
      aggregated_batches:
        type: integer
      aggregation_queue:
        $ref: '#/definitions/main.QueueStatus'
      completed_parts:
        type: integer
      finalization_queue:
        $ref: '#/definitions/main.QueueStatus'
      finalized_batches:
        type: integer
      ready_batches:
        type: integer
      submission_queue:
        $ref: '#/definitions/main.QueueStatus'
      timestamp:
        type: string
    type: object
  main.QueueStatus:
    properties:
      depth:
        type: integer
      status:
        type: string
    type: object
  main.ReadyBatch:
    properties:
      epoch_id:
        type: string
      has_votes:
        type: boolean
      project_count:
        type: integer
    type: object
  main.SubmissionWindow:
    properties:
      closed_at:
        type: string
      epoch_id:
        type: string
      market:
        type: string
      status:
        type: string
      ttl_seconds:
        type: integer
    type: object
  main.WorkerStatus:
    properties:
      epoch_id:
        type: string
      healthy:
        type: boolean
      last_heartbeat:
        type: string
      project_id:
        type: string
      status:
        type: string
      worker_id:
        type: string
    type: object
info:
  contact: {}
  description: Monitoring API for Decentralized Sequencer Validator pipeline
  title: DSV Pipeline Monitor API
  version: "1.0"
paths:
  /aggregation/queue:
    get:
      description: Get aggregation queue status
      parameters:
      - description: Protocol state identifier
        in: query
        name: protocol
        type: string
      - description: Data market address
        in: query
        name: market
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      summary: Aggregation queue
      tags:
      - aggregation
  /aggregation/results:
    get:
      description: Get network-wide aggregated batches with complete batch information
      parameters:
      - description: Protocol state identifier
        in: query
        name: protocol
        type: string
      - description: Data market address
        in: query
        name: market
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/main.AggregatedBatch'
            type: array
      summary: Aggregated batches
      tags:
      - aggregation
  /batches/finalization-queue:
    get:
      description: Get finalization queue status
      parameters:
      - description: Protocol state identifier
        in: query
        name: protocol
        type: string
      - description: Data market address
        in: query
        name: market
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      summary: Finalization queue
      tags:
      - batches
  /batches/finalized:
    get:
      description: Get finalized batches with details
      parameters:
      - description: Protocol state identifier
        in: query
        name: protocol
        type: string
      - description: Data market address
        in: query
        name: market
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/main.FinalizedBatch'
            type: array
      summary: Finalized batches
      tags:
      - batches
  /batches/parts:
    get:
      description: Get completed batch parts from parallel finalization
      parameters:
      - description: Protocol state identifier
        in: query
        name: protocol
        type: string
      - description: Data market address
        in: query
        name: market
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/main.BatchPart'
            type: array
      summary: Batch parts
      tags:
      - batches
  /batches/ready:
    get:
      description: Get batches ready for finalization
      parameters:
      - description: Protocol state identifier
        in: query
        name: protocol
        type: string
      - description: Data market address
        in: query
        name: market
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/main.ReadyBatch'
            type: array
      summary: Ready batches
      tags:
      - batches
  /health:
    get:
      description: Check if the API is running and can connect to Redis
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      summary: Health check
      tags:
      - health
  /pipeline/overview:
    get:
      description: Get overall pipeline status summary
      parameters:
      - description: Protocol state identifier
        in: query
        name: protocol
        type: string
      - description: Data market address
        in: query
        name: market
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/main.PipelineOverview'
      summary: Pipeline overview
      tags:
      - pipeline
  /submissions/queue:
    get:
      description: Get submission queue depth and sample entries
      parameters:
      - description: Protocol state identifier
        in: query
        name: protocol
        type: string
      - description: Data market address
        in: query
        name: market
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      summary: Submission queue status
      tags:
      - submissions
  /submissions/windows:
    get:
      description: Get active and recently closed submission windows
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/main.SubmissionWindow'
            type: array
      summary: Submission windows
      tags:
      - submissions
  /workers/status:
    get:
      description: Get status of all finalization workers
      parameters:
      - description: Protocol state identifier
        in: query
        name: protocol
        type: string
      - description: Data market address
        in: query
        name: market
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/main.WorkerStatus'
            type: array
      summary: Worker status
      tags:
      - workers
swagger: "2.0"
